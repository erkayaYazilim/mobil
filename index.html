<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8">
  <title>Mobil Football Admin Paneli</title>
  <style>
    :root {
      --primary-color: #2c3e50;
      --secondary-color: #3498db;
      --success-color: #27ae60;
      --danger-color: #e74c3c;
      --light-bg: #ecf0f1;
    }

    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: var(--light-bg);
    }

    .admin-container {
      display: grid;
      grid-template-columns: 250px 1fr;
      min-height: 100vh;
    }

    /* Sidebar */
    .sidebar {
      background: var(--primary-color);
      color: white;
      padding: 20px;
    }

    .logo {
      font-size: 24px;
      margin-bottom: 40px;
      text-align: center;
    }

    .nav-tabs {
      list-style: none;
    }

    .nav-tabs li button {
      width: 100%;
      padding: 12px;
      margin-bottom: 8px;
      background: none;
      border: none;
      color: white;
      text-align: left;
      cursor: pointer;
      border-radius: 4px;
      transition: all 0.3s;
    }

    .nav-tabs li button:hover {
      background: rgba(255,255,255,0.1);
    }

    .nav-tabs li button.active {
      background: var(--secondary-color);
    }

    /* Main Content */
    .main-content {
      padding: 30px;
      max-width: 1200px;
      margin: 0 auto;
      width: 100%;
    }

    .tab-content {
      display: none;
    }

    .tab-content.active {
      display: block;
    }

    /* Form Elements */
    .card {
      background: white;
      border-radius: 8px;
      padding: 20px;
      margin-bottom: 20px;
      box-shadow: 0 2px 5px rgba(0,0,0,0.1);
    }

    .form-group {
      margin-bottom: 15px;
    }

    label {
      display: block;
      margin-bottom: 5px;
      font-weight: 500;
    }

    input, textarea, select {
      width: 100%;
      padding: 10px;
      border: 1px solid #ddd;
      border-radius: 4px;
      font-size: 14px;
    }

    button.btn {
      padding: 10px 20px;
      border: none;
      border-radius: 4px;
      cursor: pointer;
      font-weight: 500;
      transition: opacity 0.3s;
    }

    button.btn-primary {
      background: var(--secondary-color);
      color: white;
    }

    button.btn-success {
      background: var(--success-color);
      color: white;
    }

    button.btn-danger {
      background: var(--danger-color);
      color: white;
    }

    /* Blog List */
    .blog-list {
      display: grid;
      gap: 15px;
    }

    .blog-item {
      background: white;
      padding: 15px;
      border-radius: 6px;
      box-shadow: 0 1px 3px rgba(0,0,0,0.1);
    }

    .blog-item h3 {
      color: var(--primary-color);
      margin-bottom: 10px;
    }

    .blog-meta {
      font-size: 12px;
      color: #7f8c8d;
      margin-bottom: 10px;
    }

    .message {
      padding: 10px;
      border-radius: 4px;
      margin: 10px 0;
      text-align: center;
    }

    .success-message {
      background: #d4edda;
      color: #155724;
    }

    .error-message {
      background: #f8d7da;
      color: #721c24;
    }
  </style>
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>
</head>
<body>
  <div class="admin-container">
    <!-- Sidebar -->
    <div class="sidebar">
      <div class="logo">Mobil Football Admin</div>
      <ul class="nav-tabs">
        <li><button class="active" onclick="switchTab('blog-management')">Blog Yönetimi</button></li>
        <li><button onclick="switchTab('question-management')">Soru Yönetimi</button></li>
      </ul>
    </div>

    <!-- Main Content -->
    <div class="main-content">
      <!-- Blog Management Tab -->
      <div id="blog-management" class="tab-content active">
        <div class="card">
          <h2>Yeni Blog Yazısı Ekle</h2>
          <form id="blogForm">
            <div class="form-group">
              <label>Başlık</label>
              <input type="text" id="blogTitle" required>
            </div>
            <div class="form-group">
              <label>İçerik (HTML)</label>
              <textarea id="blogContent" rows="6" required></textarea>
            </div>
            <button type="submit" class="btn btn-primary">Yayımla</button>
          </form>
        </div>

        <div class="card">
          <h2>Onay Bekleyen Yazılar</h2>
          <div id="pendingBlogs" class="blog-list"></div>
        </div>
      </div>

      <!-- Question Management Tab -->
      <div id="question-management" class="tab-content">
        <div class="card">
          <h2>Yeni Soru Ekle</h2>
          <form id="questionForm">
            <div class="form-group">
              <label>Soru Metni</label>
              <textarea id="questionText" required></textarea>
            </div>
            <div class="form-group">
              <label>Seçenekler</label>
              <input type="text" id="option1" placeholder="Seçenek 1" required>
              <input type="text" id="option2" placeholder="Seçenek 2" required>
              <input type="text" id="option3" placeholder="Seçenek 3" required>
              <input type="text" id="option4" placeholder="Seçenek 4" required>
            </div>
            <div class="form-group">
              <label>Doğru Cevap</label>
              <select id="correctAnswer" required>
                <option value="1">Seçenek 1</option>
                <option value="2">Seçenek 2</option>
                <option value="3">Seçenek 3</option>
                <option value="4">Seçenek 4</option>
              </select>
            </div>
            <button type="submit" class="btn btn-success">Soruyu Kaydet</button>
          </form>
        </div>
      </div>

      <!-- Messages -->
      <div id="message"></div>
    </div>
  </div>

  <script>
    // Firebase Konfigürasyonu
    const firebaseConfig = {
      apiKey: "AIzaSyCQKxwHYEbQ47KROEog_qa7BeLcq6At7LA",
      authDomain: "mobilfutbol-b9d83.firebaseapp.com",
      databaseURL: "https://mobilfutbol-b9d83-default-rtdb.firebaseio.com",
      projectId: "mobilfutbol-b9d83",
      storageBucket: "mobilfutbol-b9d83.appspot.com",
      messagingSenderId: "799445484199",
      appId: "1:799445484199:web:6b5316e951d3e20fd09182"
    };

    // Firebase Başlatma
    firebase.initializeApp(firebaseConfig);
    const database = firebase.database();

    // Tab Geçiş Fonksiyonu
    function switchTab(tabId) {
      document.querySelectorAll('.tab-content').forEach(tab => {
        tab.classList.remove('active');
      });
      document.querySelectorAll('.nav-tabs button').forEach(btn => {
        btn.classList.remove('active');
      });
      document.getElementById(tabId).classList.add('active');
      event.target.classList.add('active');
    }

    // Blog Yükleme
    document.getElementById('blogForm').addEventListener('submit', async (e) => {
      e.preventDefault();
      const blogData = {
        title: document.getElementById('blogTitle').value,
        content: document.getElementById('blogContent').value,
        timestamp: Date.now(),
        likes: 0,
        dislikes: 0,
        postedBy: "Admin",
        approved: true
      };

      try {
        await database.ref('blogs').push(blogData);
        showMessage('Blog başarıyla yayımlandı!', 'success');
        e.target.reset();
      } catch (error) {
        showMessage('Hata: ' + error.message, 'error');
      }
    });

    // Soru Yükleme
    document.getElementById('questionForm').addEventListener('submit', async (e) => {
      e.preventDefault();
      const questionData = {
        questionText: document.getElementById('questionText').value,
        option1: document.getElementById('option1').value,
        option2: document.getElementById('option2').value,
        option3: document.getElementById('option3').value,
        option4: document.getElementById('option4').value,
        correctAnswer: document.getElementById('correctAnswer').value
      };

      try {
        await database.ref('questions').push(questionData);
        showMessage('Soru başarıyla kaydedildi!', 'success');
        e.target.reset();
      } catch (error) {
        showMessage('Hata: ' + error.message, 'error');
      }
    });

    // Onay Bekleyen Blogları Göster
    database.ref('blogs').orderByChild('approved').equalTo(false).on('value', (snapshot) => {
      const pendingBlogsDiv = document.getElementById('pendingBlogs');
      pendingBlogsDiv.innerHTML = '';

      snapshot.forEach(childSnapshot => {
        const blog = childSnapshot.val();
        const blogElement = document.createElement('div');
        blogElement.className = 'blog-item';
        blogElement.innerHTML = `
          <h3>${blog.title}</h3>
          <div class="blog-meta">
            Gönderen: ${blog.postedBy} • 
            ${new Date(blog.timestamp).toLocaleDateString()}
          </div>
          <div class="blog-actions">
            <button class="btn btn-success" onclick="approveBlog('${childSnapshot.key}')">Onayla</button>
          </div>
        `;
        pendingBlogsDiv.appendChild(blogElement);
      });
    });

    // Blog Onaylama
    async function approveBlog(blogId) {
      try {
        await database.ref(`blogs/${blogId}`).update({ approved: true });
        showMessage('Blog onaylandı!', 'success');
      } catch (error) {
        showMessage('Onaylama hatası: ' + error.message, 'error');
      }
    }

    // Mesaj Gösterme
    function showMessage(text, type) {
      const messageDiv = document.getElementById('message');
      messageDiv.className = `message ${type}-message`;
      messageDiv.textContent = text;
      setTimeout(() => messageDiv.textContent = '', 3000);
    }
  </script>
</body>
</html>